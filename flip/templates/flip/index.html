{% extends 'flip/base.html' %}

{% block content %}
<div class="container">
  <h1>フリップボード</h1>
  <div class="card-columns"></div>
</div>

<script>
function reload() {
  $.ajax({
    type: 'GET',
    url: 'ajax/',
    dataType: 'json',
    success: function(data) {
      $('.card-columns').empty()
      var dataArray = data.objects
      $.each(dataArray, function(i) {
        $('.card-columns').append('<div class="card"><div class="card-body"><h5 class="card-title"><a href="update/' + dataArray[i].id + '">' + dataArray[i].team_name + '</a></h5>' + dataArray[i].text + '</div></div>');
      })
      // document.getElementById('ajax').innerHTML = data.objects
    }
  });
}
reload();
setInterval(reload, 5000);
</script>
{% endblock %}
